#:kivy 2.2.0
#:import dp kivy.metrics.dp

ScreenManager:
    MenuScreen:
    CreatePlayerScreen:
    PlayerSelectScreen:
    GameScreen:
    HistoryScreen:
    StatsScreen:


<MenuScreen>:
    name: "menu"

    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(15)

        Label:
            text: "Domino Scorebook"
            font_size: "28sp"
            size_hint_y: None
            height: dp(60)

        Button:
            text: "Start Game"
            on_release: root.manager.current = "select"

        Button:
            text: "Create Player"
            on_release: root.manager.current = "create"

        Button:
            text: "Game History"
            on_release: root.manager.current = "history"

        Button:
            text: "Stats"
            on_release: root.manager.current = "stats"


<CreatePlayerScreen>:
    name: "create"

    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(15)

        Label:
            text: "Create Player"
            font_size: "24sp"
            size_hint_y: None
            height: dp(50)

        TextInput:
            id: player_name_input
            hint_text: "Player name"
            multiline: False

        Button:
            text: "Save Player"
            size_hint_y: None
            height: dp(50)
            on_release: root.save_player(player_name_input.text)

        Button:
            text: "Back"
            size_hint_y: None
            height: dp(50)
            on_release: root.manager.current = "menu"


<PlayerSelectScreen>:
    name: "select"

    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(10)

        Label:
            text: "Select Players"
            font_size: "24sp"
            size_hint_y: None
            height: dp(50)

        ScrollView:
            GridLayout:
                id: player_list
                cols: 1
                spacing: dp(10)
                size_hint_y: None
                height: self.minimum_height

        Button:
            text: "Start Game"
            size_hint_y: None
            height: dp(50)
            on_release:
                app.start_game([btn.text for btn in player_list.children if btn.state == "down"])

        Button:
            text: "Back"
            size_hint_y: None
            height: dp(50)
            on_release: root.manager.current = "menu"


<GameScreen>:
    name: "game"

    BoxLayout:
        orientation: "vertical"
        padding: dp(10)
        spacing: dp(10)

        Label:
            text: "Game In Progress"
            font_size: "22sp"
            size_hint_y: None
            height: dp(40)

        ScrollView:
            GridLayout:
                id: player_container
                cols: 1
                spacing: dp(10)
                size_hint_y: None
                height: self.minimum_height

        Button:
            text: "End Game"
            size_hint_y: None
            height: dp(50)
            on_release: root.manager.current = "menu"


<HistoryScreen>:
    name: "history"

    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(10)

        Label:
            text: "Game History"
            font_size: "24sp"
            size_hint_y: None
            height: dp(50)

        ScrollView:
            GridLayout:
                id: history_list
                cols: 1
                spacing: dp(10)
                size_hint_y: None
                height: self.minimum_height

        Button:
            text: "Back"
            size_hint_y: None
            height: dp(50)
            on_release: root.manager.current = "menu"


<StatsScreen>:
    name: "stats"

    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(10)

        Label:
            text: "Player Stats (Coming Soon)"
            font_size: "22sp"

        Button:
            text: "Back"
            size_hint_y: None
            height: dp(50)
            on_release: root.manager.current = "menu"